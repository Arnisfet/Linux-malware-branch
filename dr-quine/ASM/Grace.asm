; nasm -g -F dwarf -felf64 Grace.asm ; gcc -static -g -o Grace Grace.o
%define OPEN_CALL 0x2000005
%define CLOSE_CALL 0x2000006
%define RDWR_CALL 0x00202

%macro macro_main 0
global main
extern dprintf

section .rodata
out_file db "Grace_kid.s", 0
string db "Hello!", 10

section .text
main:
  enter 0, 0
  mov rax, OPEN_CALL
  lea rdi, [out_file]
  mov rsi, RDWR_CALL
  mov rdx, 420
  syscall

  mov rdi, rax
  mov rsi, [string]
  call dprintf

  mov rax, CLOSE_CALL
  syscall
  leave
  ret
%endmacro

macro_main
  
