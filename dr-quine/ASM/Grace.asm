; nasm -g -F dwarf -felf64 Grace.asm ; gcc -static -g -o Grace Grace.o
%define OPEN_CALL 2
%define CLOSE_CALL 60
%define RDWR_CALL 0666o

%macro macro_main 0
global main
extern dprintf

section .rodata
filename db "Grace_kid.asm", 0
string db "Hello!, %1$c", 0

section .text
main:
    mov rdi, filename
    mov rsi, 0102o     ;O_CREAT, man open
    mov rdx, RDWR_CALL     ;umode_t
    mov rax, OPEN_CALL
    syscall

	mov rdi, rax
	lea rsi, [rel string]
    mov rdx, 10
    xor rax, rax
	call	dprintf

    mov rax, CLOSE_CALL
    syscall
    ret
%endmacro

macro_main
  
